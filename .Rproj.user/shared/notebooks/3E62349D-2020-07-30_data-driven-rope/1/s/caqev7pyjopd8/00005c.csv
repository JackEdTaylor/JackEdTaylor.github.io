"0","rope <- c(-0.7, 0.7)"
"0","nobs <- 100000"
"0","situations <- c(""No overlap\n(Evidence in favour of H1)"", ""Complete overlap\n(Evidence in favour of H0)"", ""Partial overlap\n(Evidence inconclusive)"")"
"0","colours <- c(rope=""#c22f25"", hdi=""#808080"")"
"0",""
"0","vals <- list(rnorm(nobs, 1.5, 0.25), rnorm(nobs, 0, 0.25), rnorm(nobs, 0.75, 0.25))"
"0",""
"0","densities <- lapply(vals, function(dat) with(density(dat), tibble(posterior_val=x, density=y)))"
"0",""
"0","ci <- lapply(vals, quantile, c(.025, .975))"
"0",""
"0","plt_dat <- tibble("
"0","  situation = factor(rep(situations, each=nrow(densities[[1]])), levels=situations),"
"0","  posterior_val = c(densities[[1]]$posterior_val, densities[[2]]$posterior_val, densities[[3]]$posterior_val),"
"0","  density = c(densities[[1]]$density, densities[[2]]$density, densities[[3]]$density),"
"0","  ci_low = rep(c(ci[[1]][[""2.5%""]], ci[[2]][[""2.5%""]], ci[[3]][[""2.5%""]]), each=nrow(densities[[1]])),"
"0","  ci_high = rep(c(ci[[1]][[""97.5%""]], ci[[2]][[""97.5%""]], ci[[3]][[""97.5%""]]), each=nrow(densities[[1]]))"
"0",")"
"0",""
"0","ggplot(plt_dat) +"
"0","  # annotate(aes(fill=colours[[""rope""]]), ""rect"", xmin = rope[1], xmax = rope[2], ymin = -Inf, ymax = Inf, alpha = 0.35) +"
"0","  geom_rect("
"0","    aes(xmin = rope[1], xmax = rope[2], ymin = -Inf, ymax = Inf, fill=colours[[""rope""]]),"
"0","    data=group_by(plt_dat, situation) %>% summarise(ci_low=mean(ci_low), ci_high=mean(ci_high)),"
"0","    alpha=0.5"
"0","  ) +"
"0","  geom_area("
"0","    aes(posterior_val, density, fill=colours[[""hdi""]]),"
"0","    data=rowwise(plt_dat) %>% filter(between(posterior_val, ci_low, ci_high)),"
"0","    alpha=1"
"0","  ) +"
"0","  geom_line(aes(posterior_val, density)) +"
"0","  facet_wrap(vars(situation)) +"
"0","  scale_fill_identity(name=NULL, guide=""legend"", labels = c(""HDI"", ""ROPE"")) +"
"0","  guides(fill = guide_legend(override.aes = list(alpha = c(1, 0.5)))) +"
"0","  labs(x=""Posterior Value"", y=""Density"") +"
"0","  theme("
"0","    axis.text=element_blank(),"
"0","    axis.ticks=element_blank(),"
"0","    legend.position=""top"""
"0","  )"
